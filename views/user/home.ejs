<%- include("../partials/user/header") %>
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="format-detection" content="telephone=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <link href="apple-touch-icon.png" rel="apple-touch-icon">
    <link href="favicon.png" rel="icon">
    <title>DieCastro | Miniature Die-Cast Cars for Collectors & Enthusiasts</title>
    <meta name="description" content="Discover top-quality miniature die-cast cars at DieCastro. Perfect for collectors and hobbyists. Free shipping on select models!">
    <meta name="keywords" content="miniature cars, diecast cars, 1:24 cars,1:18 cars ,toy cars, collector models, vintage cars">
    <meta name="author" content="DieCastro Team">

    <!-- Fonts-->
    <link href="https://fonts.googleapis.com/css?family=Archivo+Narrow:300,400,700%7CMontserrat:300,400,500,600,700,800,900" rel="stylesheet">
    <link rel="stylesheet" href="plugins/font-awesome/css/font-awesome.min.css">
    <link rel="stylesheet" href="plugins/ps-icon/style.css">
    <!-- CSS Library-->
    <link rel="stylesheet" href="plugins/bootstrap/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="plugins/owl-carousel/assets/owl.carousel.css">
    <link rel="stylesheet" href="plugins/jquery-bar-rating/dist/themes/fontawesome-stars.css">
    <link rel="stylesheet" href="plugins/slick/slick/slick.css">
    <link rel="stylesheet" href="plugins/bootstrap-select/dist/css/bootstrap-select.min.css">
    <link rel="stylesheet" href="plugins/Magnific-Popup/dist/magnific-popup.css">
    <link rel="stylesheet" href="plugins/jquery-ui/jquery-ui.min.css">
    <link rel="stylesheet" href="plugins/revolution/css/settings.css">
    <link rel="stylesheet" href="plugins/revolution/css/layers.css">
    <link rel="stylesheet" href="plugins/revolution/css/navigation.css">
    <!-- Custom-->
    <link rel="stylesheet" href="css/style.css">
    <!-- Toastr CSS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.css">
    <!-- Wishlist Dependencies -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <!-- Toastr JS -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap');

        .carousel {
            position: relative;
            height: 400px;
            overflow: hidden;
            background-color: #F4F4F4;
            padding: 44px;
            border-radius: 30px;
        }

        .carousel .list {
            position: absolute;
            width: 1140px;
            max-width: 90%;
            height: 80%;
            left: 50%;
            transform: translateX(-50%);
        }

        .carousel .list .item {
            position: absolute;
            left: 0%;
            width: 70%;
            height: 100%;
            font-size: 15px;
            transition: left 0.5s, opacity 0.5s, width 0.5s;
        }

        .carousel .list .item:nth-child(n + 6) {
            opacity: 0;
        }

        .carousel .list .item:nth-child(2) {
            z-index: 10;
            transform: translateX(0);
        }

        .carousel .list .item img {
            width: 50%;
            position: absolute;
            right: 0;
            top: 50%;
            transform: translateY(-50%);
            transition: right 1.5s;
            cursor: pointer;
        }

        .carousel .list .item .introduce {
            opacity: 0;
            pointer-events: none;
        }

        .carousel .list .item:nth-child(2) .introduce {
            opacity: 1;
            pointer-events: auto;
            width: 400px;
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            transition: opacity 0.5s;
            font-family: Poppins, sans-serif;
        }

        .carousel .list .item .introduce .title {
            font-size: 1.5em;
            font-weight: 500;
            line-height: 1em;
        }

        .carousel .list .item .introduce .topic {
            font-size: 2.5em;
            font-weight: 500;
        }

        .carousel .list .item .introduce .des {
            font-size: small;
            color: #5559;
        }

        .carousel .list .item .introduce .seeMore {
            font-family: Poppins, sans-serif;
            margin-top: 1.2em;
            padding: 5px 0;
            border: none;
            border-bottom: 1px solid #555;
            background-color: transparent;
            font-weight: bold;
            letter-spacing: 3px;
            transition: background 0.5s;
            cursor: pointer;
            text-decoration: none;
            color: #000;
        }

        .carousel .list .item .introduce .seeMore:hover {
            background: #eee;
        }

        .carousel .list .item:nth-child(1) {
            transform: translateX(-100%) translateY(-5%) scale(1.5);
            filter: blur(30px);
            z-index: 11;
            opacity: 0;
            pointer-events: none;
        }

        .carousel .list .item:nth-child(3) {
            transform: translate(50%, 10%) scale(0.8);
            filter: blur(10px);
            z-index: 9;
        }

        .carousel .list .item:nth-child(4) {
            transform: translate(90%, 20%) scale(0.5);
            filter: blur(30px);
            z-index: 8;
        }

        .carousel .list .item:nth-child(5) {
            transform: translate(120%, 30%) scale(0.3);
            filter: blur(40px);
            opacity: 0;
            pointer-events: none;
        }

        .carousel .list .item:nth-child(2) .introduce .title,
        .carousel .list .item:nth-child(2) .introduce .topic,
        .carousel .list .item:nth-child(2) .introduce .des,
        .carousel .list .item:nth-child(2) .introduce .seeMore {
            opacity: 0;
            animation: showContent 0.5s 1s ease-in-out 1 forwards;
        }

        @keyframes showContent {
            from {
                transform: translateY(-30px);
                filter: blur(10px);
            }

            to {
                transform: translateY(0);
                opacity: 1;
                filter: blur(0px);
            }
        }

        .carousel .list .item:nth-child(2) .introduce .topic {
            animation-delay: 1.2s;
        }

        .carousel .list .item:nth-child(2) .introduce .des {
            animation-delay: 1.4s;
        }

        .carousel .list .item:nth-child(2) .introduce .seeMore {
            animation-delay: 1.6s;
        }

        .carousel.next .item:nth-child(1) {
            animation: transformFromPosition2 0.5s ease-in-out 1 forwards;
        }

        @keyframes transformFromPosition2 {
            from {
                transform: translateX(0);
                filter: blur(0px);
                opacity: 1;
            }
        }

        .carousel.next .item:nth-child(2) {
            animation: transformFromPosition3 0.7s ease-in-out 1 forwards;
        }

        @keyframes transformFromPosition3 {
            from {
                transform: translate(50%, 10%) scale(0.8);
                filter: blur(10px);
                opacity: 1;
            }
        }

        .carousel.next .item:nth-child(3) {
            animation: transformFromPosition4 0.9s ease-in-out 1 forwards;
        }

        @keyframes transformFromPosition4 {
            from {
                transform: translate(90%, 20%) scale(0.5);
                filter: blur(30px);
                opacity: 1;
            }
        }

        .carousel.next .item:nth-child(4) {
            animation: transformFromPosition5 1.1s ease-in-out 1 forwards;
        }

        @keyframes transformFromPosition5 {
            from {
                transform: translate(120%, 30%) scale(0.3);
                filter: blur(40px);
                opacity: 0;
            }
        }

        .carousel.prev .list .item:nth-child(5) {
            animation: transformFromPosition4 0.5s ease-in-out 1 forwards;
        }

        .carousel.prev .list .item:nth-child(4) {
            animation: transformFromPosition3 0.7s ease-in-out 1 forwards;
        }

        .carousel.prev .list .item:nth-child(3) {
            animation: transformFromPosition2 0.9s ease-in-out 1 forwards;
        }

        .carousel.prev .list .item:nth-child(2) {
            animation: transformFromPosition1 1.1s ease-in-out 1 forwards;
        }

        @keyframes transformFromPosition1 {
            from {
                transform: translateX(-100%) translateY(-5%) scale(1.5);
                filter: blur(30px);
                opacity: 0;
            }
        }

        .carousel .list .item .detail {
            opacity: 0;
            pointer-events: none;
            font-family: Poppins, sans-serif;
        }

        .carousel.showDetail .list .item:nth-child(3),
        .carousel.showDetail .list .item:nth-child(4) {
            left: 100%;
            opacity: 0;
            pointer-events: none;
        }

        .carousel.showDetail .list .item:nth-child(2) {
            width: 100%;
        }

        .carousel.showDetail .list .item:nth-child(2) .introduce {
            opacity: 0;
            pointer-events: none;
        }

        .carousel.showDetail .list .item:nth-child(2) img {
            width: 40%;
            left: 5%;
            right: auto;
            top: 50%;
            transform: translateY(-50%);
        }

        .carousel.showDetail .list .item:nth-child(2) .detail {
            opacity: 1;
            width: 50%;
            position: absolute;
            right: 5%;
            top: 50%;
            transform: translateY(-50%);
            text-align: left;
            pointer-events: auto;
            padding-left: 20px;
        }

        .carousel.showDetail .list .item:nth-child(2) .detail .title {
            font-size: 2em;
        }

        .carousel.showDetail .list .item:nth-child(2) .detail .categories {
            margin-top: 10px;
        }

        .carousel.showDetail .list .item:nth-child(2) .detail .categories a {
            color: #555;
            text-decoration: none;
            margin-right: 10px;
        }

        .carousel.showDetail .list .item:nth-child(2) .detail .price {
            font-size: 1.5em;
            font-weight: bold;
            margin-top: 10px;
        }

        .carousel.showDetail .list .item:nth-child(2) .detail .price del {
            color: #999;
            margin-right: 10px;
        }

        .carousel.showDetail .list .item:nth-child(2) .detail .title,
        .carousel.showDetail .list .item:nth-child(2) .detail .des,
        .carousel.showDetail .list .item:nth-child(2) .detail .categories,
        .carousel.showDetail .list .item:nth-child(2) .detail .price {
            opacity: 0;
            animation: showContent 0.5s 1s ease-in-out 1 forwards;
        }

        .carousel.showDetail .list .item:nth-child(2) .detail .des {
            animation-delay: 1.2s;
        }

        .carousel.showDetail .list .item:nth-child(2) .detail .categories {
            animation-delay: 1.4s;
        }

        .carousel.showDetail .list .item:nth-child(2) .detail .price {
            animation-delay: 1.6s;
        }

        .arrows {
            position: absolute;
            bottom: 10px;
            width: 1140px;
            max-width: 90%;
            display: flex;
            justify-content: space-between;
            left: 50%;
            transform: translateX(-50%);
        }

        #prev,
        #next {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            font-family: monospace;
            border: 1px solid #5555;
            font-size: large;
            bottom: 20%;
            left: 10%;
            background-color: #fff;
            cursor: pointer;
        }

        #next {
            left: unset;
            right: 10%;
        }

        #back {
            position: absolute;
            z-index: 100;
            bottom: 0%;
            left: 50%;
            transform: translateX(-50%);
            border: none;
            border-bottom: 1px solid #555;
            font-family: Poppins, sans-serif;
            font-weight: bold;
            letter-spacing: 3px;
            background-color: transparent;
            padding: 10px;
            transition: opacity 0.5s;
            cursor: pointer;
        }

        .carousel.showDetail #back {
            opacity: 1;
        }

        .carousel.showDetail #prev,
        .carousel.showDetail #next {
            opacity: 0;
            pointer-events: none;
        }

        .carousel::before {
            width: 500px;
            height: 300px;
            content: '';
            background-image: linear-gradient(70deg, #2AC37D);
            position: absolute;
            z-index: -1;
            border-radius: 20% 30% 80% 10%;
            filter: blur(150px);
            top: 50%;
            left: 50%;
            transform: translate(-10%, -50%);
            transition: 1s;
        }

        .carousel.showDetail::before {
            transform: translate(-100%, -50%) rotate(90deg);
            filter: blur(130px);
        }

        @media screen and (max-width: 991px) {
            .carousel .list .item {
                width: 90%;
            }

            .carousel.showDetail .list .item:nth-child(2) .detail .title {
                font-size: 1.5em;
            }

            .carousel.showDetail .list .item:nth-child(2) .img {
                width: 50%;
                left: 5%;
            }

            .carousel.showDetail .list .item:nth-child(2) .detail {
                width: 45%;
                right: 5%;
                padding-left: 10px;
            }
        }

        @media screen and (max-width: 767px) {
            .carousel {
                height: 500px;
            }

            .carousel .list .item {
                width: 100%;
                font-size: 10px;
            }

            .carousel .list {
                height: 100%;
            }

            .carousel .list .item:nth-child(2) .introduce {
                width: 50%;
            }

            .carousel .list .item img {
                width: 40%;
            }

            .carousel.showDetail .list .item:nth-child(2) img {
                width: 100%;
                left: 0;
                top: 30%;
                transform: translateY(-20%);
            }

            .carousel.showDetail .list .item:nth-child(2) .detail {
                width: 90%;
                right: 5%;
                top: 70%;
                transform: translateY(-10%);
                text-align: center;
                padding-left: 0;
                backdrop-filter: blur(5px);
            }

            .carousel.showDetail .list .item:nth-child(2) .detail .title {
                font-size: 1.2em;
            }

            .carousel .list .item:nth-child(2) .introduce .des,
            .carousel.showDetail .list .item:nth-child(2) .detail .des {
                height: 100px;
                overflow: auto;
            }
        }

        .progress-container {
            position: fixed;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 10px;
            background: rgba(0, 0, 0, 0.1);
            z-index: 1000;
        }

        .progress-bar {
            height: 100%;
            width: 0;
            background: linear-gradient(90deg, #2AC37D, #2AC37D);
            transition: width 0.3s ease;
            position: relative;
        }

        .progress-text {
            position: absolute;
            right: 10px;
            top: -25px;
            color: #fff;
            font-size: 14px;
            font-weight: bold;
            background: rgba(0, 0, 0, 0.7);
            padding: 5px 10px;
            border-radius: 5px;
            transition: transform 0.3s ease;
        }
    </style>
</head>
<body class="ps-loading">
    <main class="ps-main">
        <div class="ps-section--features-product ps-section masonry-root pt-100 pb-100">
            <div class="ps-container">
                <div class="ps-section__header mb-50">
                    <h3 class="ps-section__title" data-mask="features">- Features Products</h3>
                </div>
                <div class="ps-section__content pb-50">
                    <div class="carousel">
                        <div class="list">
                            <% products.forEach(product => { %>
                                <div class="item">
                                    <img src="<%= product.productImage[0] %>" data-detail="/productDetails?id=<%= product._id %>" alt="<%= product.productName %>">
                                    <div class="introduce">
                                        <div class="title">
                                            <%= product.isNew ? 'NEW ARRIVAL' : (product.salePrice < product.regularPrice ? 'SALE' : '') %>
                                        </div>
                                        <div class="topic"><%= product.productName %></div>
                                        <div class="des">
                                            <%= product.categories ? product.categories.join(', ') : product.description %>
                                        </div>
                                        <a href="/productDetails?id=<%= product._id %>" class="seeMore">SEE MORE <i class="fa-solid fa-share"></i></a>
                                    </div>
                                    <div class="detail">
                                        <div class="title"><%= product.productName %></div>
                                        <div class="des">
                                            <%= product.categories ? 'H' + product.categories[0] : product.description %>.
                                        </div>
                                        <div class="categories">
                                            <% (product.categories || []).forEach(category => { %>
                                                <a href="/filter?category=<%= category %>"><%= category %></a>,
                                            <% }) %>
                                        </div>
                                        <div class="price">
                                            <% if (product.salePrice < product.regularPrice) { %>
                                                <del>₹<%= product.regularPrice.toLocaleString('en-IN') %></del>
                                            <% } %>
                                            ₹<%= product.salePrice.toLocaleString('en-IN') %>
                                        </div>
                                    </div>
                                </div>
                            <% }) %>
                        </div>
                        <div class="arrows">
                            <button id="prev"><i class="fa-solid fa-backward"></i></button>
                            <button id="next"><i class="fa-solid fa-forward"></i></button>
                            <button id="back">See All </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="ps-section--offer">
            <div class="ps-column"><a class="ps-offer" href="/shop"><img src="https://www.amalgamcollection.com/cdn/shop/files/PorscheSpyder-JamesDeanFigure-PROMO-Front3.4AWIDEEDIT_2000x850_crop_center.jpg?v=1743093047" alt=""></a></div>
            <div class="ps-column"><a class="ps-offer" href="/shop"><img src="https://www.amalgamcollection.com/cdn/shop/files/Heroimagewideedit_0cb9aaa6-2223-46fd-89b5-eb2ccd85cbe9_2000x850_crop_center.jpg?v=1744821507" alt=""></a></div>
        </div>

        <div class="ps-section--sale-off ps-section pt-80 pb-40">
            <div class="ps-container">
                <div class="ps-section__header mb-50">
                    <h3 class="ps-section__title" data-mask="Sale off">- Hot Deal Today</h3>
                </div>
                <div class="ps-section__content">
                    <div class="row" id="hot-deal-container">
                        <% if (products && products.length > 0) { %>
                            <div class="col-lg-6 col-md-12 col-sm-12 col-xs-12">
                                <div class="ps-hot-deal" id="hot-deal">
                                    <div class="ps-product ps-product--hot-deal">
                                        <div class="ps-product__thumbnail">
                                            <img id="hot-deal-image" src="" alt="">
                                            <a class="ps-product__overlay" id="hot-deal-link" href=""></a>
                                        </div>
                                        <div class="ps-product__content">
                                            <h4 class="ps-product__title">
                                                <a id="hot-deal-title" href=""></a>
                                            </h4>
                                            <p class="ps-product__price" id="hot-deal-price"></p>
                                            <p class="ps-product__category" id="hot-deal-categories"></p>
                                            <ul class="ps-countdown" data-time="December 31, 2025 23:59:59">
                                                <li><span class="hour"></span><p>Hours</p></li>
                                                <li class="divider">:</li>
                                                <li><span class="minutes"></span><p>minutes</p></li>
                                                <li class="divider">:</li>
                                                <li><span class="seconds"></span><p>Seconds</p></li>
                                            </ul>
                                            <a class="ps-btn" id="hot-deal-order" href="">Order Today<i class="ps-icon-next"></i></a>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-lg-6 col-md-12 col-sm-12 col-xs-12">
                                <div class="ps-hotspot">
                                    <a class="point first activ" href="javascript:;"><i class="fa fa-plus"></i>
                                        <div class="ps-hotspot__content">
                                            <p class="heading">Feature 1</p>
                                            <p id="hot-deal-description"></p>
                                        </div>
                                    </a>
                                    <a class="point second" href="javascript:;"><i class="fa fa-plus"></i>
                                        <div class="ps-hotspot__content">
                                            <p class="heading">Feature 2</p>
                                            <p>Lightweight cushioning offers comfort and performance with every step.</p>
                                        </div>
                                    </a>
                                    <a class="point third" href="javascript:;"><i class="fa fa-plus"></i>
                                        <div class="ps-hotspot__content">
                                            <p class="heading">Feature 3</p>
                                            <p>Engineered upper materials increase durability and airflow for optimal performance.</p>
                                        </div>
                                    </a>
                                    <img id="hot-deal-secondary-image" src="" alt="">
                                </div>
                            </div>
                        <% } else { %>
                            <div class="col-12 text-center">
                                <p>No hot deals available right now!</p>
                            </div>
                        <% } %>
                        <h1 style=" display: flex; align-items: center; font-family: 'Inter', sans-serif; font-size: 4.5rem; font-weight: 900; color: #000000; text-align: center; text-transform: uppercase; letter-spacing: 2px; background: linear-gradient(135deg, #000000, #000000); -webkit-background-clip: text; -webkit-text-fill-color: transparent; text-shadow: 0 6px 12px rgba(0, 0, 0, 0.3); margin: 2rem 0; padding: 1rem; line-height: 1.2;">
   "Rev Up Your Collection with Our Stunning Miniature Cars Today!"
</h1>
                    </div>
                </div>
            </div>
        </div>

        <div class="ps-section ps-section--top-sales ps-owl-root pt-80 pb-80">
            <div class="ps-container">
                <div class="ps-section__header mb-50">
                    <div class="row">
                        <div class="col-lg-9 col-md-9 col-sm-12 col-xs-12 ">
                            <h3 class="ps-section__title" data-mask="BEST SALE">- Top Sales</h3>
                        </div>
                        <div class="col-lg-3 col-md-3 col-sm-12 col-xs-12 ">
                            <div class="ps-owl-actions">
                                <a class="ps-prev" href="#"><i class="ps-icon-arrow-right"></i>Prev</a>
                                <a class="ps-next" href="#">Next<i class="ps-icon-arrow-left"></i></a>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="ps-section__content">
                    <div class="ps-owl--colection owl-slider" data-owl-auto="true" data-owl-loop="true"
                        data-owl-speed="5000" data-owl-gap="30" data-owl-nav="false" data-owl-dots="false"
                        data-owl-item="4" data-owl-item-xs="1" data-owl-item-sm="2" data-owl-item-md="3"
                        data-owl-item-lg="4" data-owl-duration="1000" data-owl-mousedrag="on">
                        <% products.forEach(product => { %>
                            <div class="ps-shoes--carousel">
                                <div class="ps-shoe">
                                    <div class="ps-shoe__thumbnail">
                                        <% if (product.isNew) { %>
                                            <div class="ps-badge"><span>New</span></div>
                                        <% } %>
                                        <% if (product.salePrice < product.regularPrice) { %>
                                            <div class="ps-badge ps-badge--sale ps-badge--2nd"><span>-<%= Math.round(((product.regularPrice - product.salePrice) / product.regularPrice) * 100) %>%</span></div>
                                        <% } %>
                                        <a class="ps-shoe__favorite" href="#" onclick="addToWishlist('<%= product._id %>')"><i class="ps-icon-heart"></i></a>
                                        <img src="<%= product.productImage[0] %>" alt="<%= product.productName %>">
                                        <a class="ps-shoe__overlay" href="/productDetails?id=<%= product._id %>"></a>
                                    </div>
                                    <div class="ps-shoe__content">
                                        <div class="ps-shoe__variants">
                                            <div class="ps-shoe__variant normal">
                                                <% for (let j = 0; j < Math.min(product.productImage.length, 4); j++) { %>
                                                    <img src="<%= product.productImage[j] %>" alt="">
                                                <% } %>
                                            </div>
                                            <select class="ps-rating ps-shoe__rating">
                                                <option value="1">1</option>
                                                <option value="1">2</option>
                                                <option value="1">3</option>
                                                <option value="1">4</option>
                                                <option value="2">5</option>
                                            </select>
                                        </div>
                                        <div class="ps-shoe__detail">
                                            <a class="ps-shoe__name" href="/productDetails?id=<%= product._id %>"><%= product.productName %></a>
                                            <p class="ps-shoe__categories">
                                                <% (product.categories || ['miniature cars']).forEach(category => { %>
                                                    <a href="/filter?category=<%= category %>"><%= category %></a>,
                                                <% }) %>
                                            </p>
                                            <span class="ps-shoe__price">
                                                <% if (product.salePrice < product.regularPrice) { %>
                                                    <del>₹<%= product.regularPrice.toLocaleString('en-IN') %></del>
                                                <% } %>
                                                ₹<%= product.salePrice.toLocaleString('en-IN') %>
                                            </span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        <% }) %>
                    </div>
                </div>
            </div>
        </div>

        <div class="ps-features pt-80 pb-80">
            <div class="ps-container">
                <div class="row">
                    <div class="col-lg-4 col-md-4 col-sm-4 col-xs-12 ">
                        <div class="ps-iconbox">
                            <div class="ps-iconbox__header"><i class="ps-icon-delivery"></i>
                                <h3>Free shipping</h3>
                                <p>ON ORDER OVER 1000</p>
                            </div>
                            <div class="ps-iconbox__content">
                                <p>Want to track a package? Find tracking information and order details from Your Orders.</p>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-4 col-md-4 col-sm-4 col-xs-12 ">
                        <div class="ps-iconbox">
                            <div class="ps-iconbox__header"><i class="ps-icon-money"></i>
                                <h3>100% MONEY BACK.</h3>
                                <p>WITHIN 30 DAYS AFTER DELIVERY.</p>
                            </div>
                            <div class="ps-iconbox__content">
                                <p>You may return most new, unopened items sold within 30 days of delivery for a full refund.</p>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-4 col-md-4 col-sm-4 col-xs-12 ">
                        <div class="ps-iconbox">
                            <div class="ps-iconbox__header"><i class="ps-icon-customer-service"></i>
                                <h3>SUPPORT 24/7.</h3>
                                <p>WE CAN HELP YOU ONLINE.</p>
                            </div>
                            <div class="ps-iconbox__content">
                                <p>We offer a 24/7 customer hotline so you’re never alone if you have a question.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="ps-home-testimonial bg--parallax pb-80" data-background="images/background/parallax.jpg">
            <div class="container">
                <div class="owl-slider" data-owl-auto="true" data-owl-loop="true" data-owl-speed="5000" data-owl-gap="0"
                    data-owl-nav="false" data-owl-dots="true" data-owl-item="1" data-owl-item-xs="1"
                    data-owl-item-sm="1" data-owl-item-md="1" data-owl-item-lg="1" data-owl-duration="1000"
                    data-owl-mousedrag="on" data-owl-animate-in="fadeIn" data-owl-animate-out="fadeOut">
                    <div class="ps-testimonial">
                        <div class="ps-testimonial__thumbnail"><img src="images/testimonial/ajsa.png" alt=""><i class="fa fa-quote-left"></i></div>
                        <header>
                            <select class="ps-rating">
                                <option value="1">1</option>
                                <option value="1">2</option>
                                <option value="1">3</option>
                                <option value="1">4</option>
                                <option value="5">5</option>
                            </select>
                            <p>Ajsal - CEO & Founder Invision</p>
                        </header>
                        <footer>
                            <p>“Dessert pudding dessert jelly beans cupcake sweet caramels gingerbread. Fruitcake biscuit cheesecake. Cookie topping sweet muffin pudding tart bear claw sugar plum croissant.”</p>
                        </footer>
                    </div>
                    <div class="ps-testimonial">
                        <div class="ps-testimonial__thumbnail"><img src="images/testimonial/shamveel.png" alt=""><i class="fa fa-quote-left"></i></div>
                        <header>
                            <select class="ps-rating">
                                <option value="1">1</option>
                                <option value="1">2</option>
                                <option value="1">3</option>
                                <option value="1">4</option>
                                <option value="5">5</option>
                            </select>
                            <p>Shamveel - Chief Operating Officer (COO)</p>
                        </header>
                        <footer>
                            <p>“Dessert pudding dessert jelly beans cupcake sweet caramels gingerbread. Fruitcake biscuit cheesecake. Cookie topping sweet muffin pudding tart bear claw sugar plum croissant.”</p>
                        </footer>
                    </div>
                    <div class="ps-testimonial">
                        <div class="ps-testimonial__thumbnail"><img src="images/testimonial/nijas.png" alt=""><i class="fa fa-quote-left"></i></div>
                        <header>
                            <select class="ps-rating">
                                <option value="1">1</option>
                                <option value="1">2</option>
                                <option value="1">3</option>
                                <option value="1">4</option>
                                <option value="5">5</option>
                            </select>
                            <p>Nijas - Chief Financial Officer (CFO)</p>
                        </header>
                        <footer>
                            <p>“Dessert pudding dessert jelly beans cupcake sweet caramels gingerbread. Fruitcake biscuit cheesecake. Cookie topping sweet muffin pudding tart bear claw sugar plum croissant.”</p>
                        </footer>
                    </div>
                    <div class="ps-testimonial">
                        <div class="ps-testimonial__thumbnail"><img src="images/testimonial/fahad.png" alt=""><i class="fa fa-quote-left"></i></div>
                        <header>
                            <select class="ps-rating">
                                <option value="1">1</option>
                                <option value="1">2</option>
                                <option value="1">3</option>
                                <option value="1">4</option>
                                <option value="5">5</option>
                            </select>
                            <p>Fahad - Chief Marketing Officer (CMO)</p>
                        </header>
                        <footer>
                            <p>“Dessert pudding dessert jelly beans cupcake sweet caramels gingerbread. Fruitcake biscuit cheesecake. Cookie topping sweet muffin pudding tart bear claw sugar plum croissant.”</p>
                        </footer>
                    </div>
                </div>
            </div>
        </div>

        <div class="ps-subscribe">
            <div class="ps-container">
                <div class="row">
                    <div class="col-lg-3 col-md-12 col-sm-12 col-xs-12 ">
                        <h3><i class="fa fa-envelope"></i>Sign up to Newsletter</h3>
                    </div>
                    <div class="col-lg-5 col-md-7 col-sm-12 col-xs-12 ">
                        <form class="ps-subscribe__form" action="do_action" method="post">
                            <input class="form-control" type="text" placeholder="">
                            <button>Sign up now </button>
                        </form>
                    </div>
                    <div class="col-lg-4 col-md-5 col-sm-12 col-xs-12 ">
                        <p>...and receive <span>$20</span> coupon for first shopping.</p>
                    </div>
                </div>
            </div>
        </div>

        <div class="progress-container">
            <div class="progress-bar" id="progressBar">
                <span class="progress-text" id="progressText">0%</span>
            </div>
        </div>

        <script>
            // Configure Toastr options
            toastr.options = {
                "closeButton": true,
                "progressBar": true,
                "positionClass": "toast-top-right",
                "showDuration": "300",
                "hideDuration": "1000",
                "timeOut": "2000",
                "extendedTimeOut": "1000",
                "showEasing": "swing",
                "hideEasing": "linear",
                "showMethod": "fadeIn",
                "hideMethod": "fadeOut"
            };

            window.addEventListener('scroll', () => {
                const scrollTop = window.scrollY || document.documentElement.scrollTop;
                const scrollHeight = document.documentElement.scrollHeight - document.documentElement.clientHeight;
                const scrollPercentage = (scrollTop / scrollHeight) * 100;
                const progressBar = document.getElementById('progressBar');
                progressBar.style.width = scrollPercentage + '%';
                const progressText = document.getElementById('progressText');
                progressText.textContent = Math.round(scrollPercentage) + '%';
            });

            function addToWishlist(productId) {
                console.log("Adding to Wishlist:", productId);
                $.ajax({
                    url: '/addToWishlist',
                    method: "POST",
                    data: { productId: productId },
                    success: (response) => {
                        console.log("Server Response:", response);
                        if (response.status) {
                            toastr.success("The Product has been added to your wishlist", "Added to Wishlist");
                        } else {
                            toastr.info(response.message, "Already in Wishlist");
                        }
                    },
                    error: (error) => {
                        console.error("AJAX Error:", error);
                        toastr.error("There was an error adding the product to your wishlist", "Error");
                    }
                });
            }

            document.addEventListener('DOMContentLoaded', function () {
                let nextButton = document.getElementById('next');
                let prevButton = document.getElementById('prev');
                let carousel = document.querySelector('.carousel');
                let listHTML = document.querySelector('.carousel .list');
                let seeMoreButtons = document.querySelectorAll('.seeMore');
                let backButton = document.getElementById('back');
                let productImages = document.querySelectorAll('.carousel .list .item img');

                let autoSlideInterval;

                const startAutoSlide = () => {
                    autoSlideInterval = setInterval(() => {
                        if (!carousel.classList.contains('showDetail')) {
                            showSlider('next');
                        }
                    }, 5000);
                };

                const stopAutoSlide = () => {
                    clearInterval(autoSlideInterval);
                };

                nextButton.onclick = function () {
                    stopAutoSlide();
                    showSlider('next');
                    startAutoSlide();
                };

                prevButton.onclick = function () {
                    stopAutoSlide();
                    showSlider('prev');
                    startAutoSlide();
                };

                let unAcceppClick;
                const showSlider = (type) => {
                    nextButton.style.pointerEvents = 'none';
                    prevButton.style.pointerEvents = 'none';

                    carousel.classList.remove('next', 'prev');
                    let items = document.querySelectorAll('.carousel .list .item');
                    if (type === 'next') {
                        listHTML.appendChild(items[0]);
                        carousel.classList.add('next');
                    } else {
                        listHTML.prepend(items[items.length - 1]);
                        carousel.classList.add('prev');
                    }
                    clearTimeout(unAcceppClick);
                    unAcceppClick = setTimeout(() => {
                        nextButton.style.pointerEvents = 'auto';
                        prevButton.style.pointerEvents = 'auto';
                    }, 2000);
                };

                seeMoreButtons.forEach((button) => {
                    button.onclick = function (e) {
                        e.preventDefault();
                        stopAutoSlide();
                        if (carousel.classList.contains('showDetail')) {
                            window.location.href = button.href;
                        } else {
                            carousel.classList.remove('next', `prev`);
                            carousel.classList.add('showDetail');
                        }
                    };
                });

                productImages.forEach((image) => {
                    image.onclick = function () {
                        stopAutoSlide();
                        if (carousel.classList.contains('showDetail')) {
                            window.location.href = image.dataset.detail;
                        } else {
                            carousel.classList.remove('next', 'prev');
                            carousel.classList.add('showDetail');
                        }
                    };
                });

                backButton.onclick = function () {
                    carousel.classList.remove('showDetail');
                    startAutoSlide();
                };

                startAutoSlide();

                // Hot Deal Today Rotation
                const hotDealContainer = document.getElementById('hot-deal-container');
                let hotDealProducts = <%- JSON.stringify(products) %>;
                let currentHotDealIndex = Math.floor(Math.random() * hotDealProducts.length);

                const updateHotDeal = () => {
                    if (hotDealProducts.length === 0) {
                        hotDealContainer.innerHTML = '<div class="col-12 text-center"><p>No hot deals available right now!</p></div>';
                        return;
                    }

                    const product = hotDealProducts[currentHotDealIndex];
                    const discountedPrice = Math.floor(product.salePrice * 0.7);
                    const categories = product.categories && product.categories.length ? product.categories : ['miniature cars'];

                    document.getElementById('hot-deal-image').src = `/${product.productImage[0]}`;
                    document.getElementById('hot-deal-image').alt = product.productName;
                    document.getElementById('hot-deal-link').href = `/productDetails?id=${product._id}`;
                    document.getElementById('hot-deal-title').href = `/productDetails?id=${product._id}`;
                    document.getElementById('hot-deal-title').textContent = product.productName;
                    document.getElementById('hot-deal-order').href = `/productDetails?id=${product._id}`;
                    document.getElementById('hot-deal-secondary-image').src = `/${product.productImage[1] || product.productImage[0]}`;
                    document.getElementById('hot-deal-secondary-image').alt = product.productName;
                    document.getElementById('hot-deal-description').textContent = product.description;

                    let priceHTML = `₹${discountedPrice.toLocaleString('en-IN')} <span>(30% OFF)</span>`;
                    if (product.salePrice < product.regularPrice) {
                        priceHTML = `<del>₹${product.regularPrice.toLocaleString('en-IN')}</del> ${priceHTML}`;
                    }
                    document.getElementById('hot-deal-price').innerHTML = priceHTML;

                    let categoriesHTML = 'Category: ';
                    categories.forEach((cat, idx) => {
                        categoriesHTML += `<a href="/filter?category=${cat}">${cat}</a>${idx < categories.length - 1 ? ', ' : ''}`;
                    });
                    document.getElementById('hot-deal-categories').innerHTML = categoriesHTML;

                    const countdown = document.querySelector('.ps-countdown');
                    const endTime = new Date(countdown.dataset.time).getTime();
                    const updateCountdown = () => {
                        const now = new Date().getTime();
                        const distance = endTime - now;
                        if (distance < 0) {
                            countdown.innerHTML = '<li><span>Expired</span></li>';
                            return;
                        }
                        const hour = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                        const minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
                        const seconds = Math.floor((distance % (1000 * 60)) / 1000);
                        countdown.querySelector('.hour').textContent = hour.toString().padStart(2, '0');
                        countdown.querySelector('.minutes').textContent = minutes.toString().padStart(2, '0');
                        countdown.querySelector('.seconds').textContent = seconds.toString().padStart(2, '0');
                    };
                    updateCountdown();
                    setInterval(updateCountdown, 1000);

                    currentHotDealIndex = (currentHotDealIndex + 1) % hotDealProducts.length;
                };

                if (hotDealProducts.length > 0) {
                    updateHotDeal();
                    setInterval(updateHotDeal, 86400000);
                }

                $('.ps-owl--colection').owlCarousel({
                    items: 4,
                    loop: true,
                    margin: 30,
                    nav: false,
                    dots: false,
                    autoplay: true,
                    autoplayTimeout: 5000,
                    responsive: {
                        0: { items: 1 },
                        576: { items: 2 },
                        768: { items: 3 },
                        992: { items: 4 }
                    }
                });
            });
        </script>
    </main>
    <%- include("../partials/user/footer") %>
</body>
</html>